
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>Appending Negative Data from AMARES to its Corresponding Positive Data</title><meta name="generator" content="MATLAB 9.7"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2019-12-09"><meta name="DC.source" content="processAMARESSweep.m"><style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; } 

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style></head><body><div class="content"><h1>Appending Negative Data from AMARES to its Corresponding Positive Data</h1><!--introduction--><!--/introduction--><h2>Contents</h2><div><ul><li><a href="#2">Inputs</a></li><li><a href="#4">Outputs</a></li><li><a href="#5">Child Functions</a></li><li><a href="#7">Calling the User if There are Insufficient Inputs</a></li><li><a href="#9">Notes</a></li></ul></div><p>In experiments such as microwave sweeps, the signal can be either negative or positive representing negative and positive hyperpolarisation respectively. The AMARES algorithm does not quantify data as negative when run. This function will process the output from two AMARES outputs, one corresponding to the positive data and one corresponding to the negative data into two separate structure arrays that can be manipulated by other functions.</p><h2 id="2">Inputs</h2><p><i>inp</i>: is the AMARES .txt output file corresponding to negative polarisation (positive amplitudes)</p><p><i>inpneg</i>: is the AMARES .txt output file corresponding to positive polarisation (higher microwave frequencies and negative amplitudes in the raw data)</p><h2 id="4">Outputs</h2><p><i>fitted</i>: is a structure array of the <i>inp</i> AMARES output <i>fittedneg</i>: is a structure array of the <i>inpneg</i> AMARES output</p><h2 id="5">Child Functions</h2><p><i>loadJmruiAmares</i>: parse the .txt output from AMARES in JMRUI into a structure array <i>validateAMARES</i>: verifies that a file can be passed into _loadJmruiAmares without throwing an exception</p><pre class="codeinput"><span class="keyword">function</span> [fitted,fittedneg] = processAMARESSweep(inp,inpneg)
</pre><h2 id="7">Calling the User if There are Insufficient Inputs</h2><p>The function requires two .txt files from the output of the AMARES algorithm. If two files have not been entered into the inputs, the function will call the user to enter more inputs. See processAMARES and loadJmruiAmares for functions that do not require multiple outputs from AMARES.</p><pre class="codeinput">    prompt = <span class="string">'Enter the AMARES .txt output corresponding to positive data to process: '</span>;
    prompt1 = <span class="string">'Please enter a valid AMARES .txt output corresponding to the positive data to process: '</span>;

    promptn = <span class="string">'Enter the AMARES .txt outputs corresponding to negative data to process: '</span>;
    promptn1 = <span class="string">'Please enter a valid AMARES .txt output corresponding to the negative data to process: '</span>;

    <span class="keyword">if</span> nargin == 0

        inp = input(prompt,<span class="string">'s'</span>);
        bool = validateAMARES(inp);

        <span class="keyword">while</span> bool == 0
            inp = input(prompt1,<span class="string">'s'</span>);
            bool = validateAMARES(inp);
        <span class="keyword">end</span>

        fitted = loadJmruiAmares(inp);

        inpneg = input(promptn,<span class="string">'s'</span>);
        bool = validateAMARES(inpneg);

        <span class="keyword">while</span> bool == 0
            inpneg = input(promptn1,<span class="string">'s'</span>);
            bool = validateAMARES(inpneg);
        <span class="keyword">end</span>

        fittedneg = loadJmruiAmares(inpneg);

    <span class="keyword">elseif</span> isempty(inp) == 1

        inp = input(prompt,<span class="string">'s'</span>);
        bool = validateAMARES(inp);

        <span class="keyword">while</span> bool == 0
            inp = input(prompt1,<span class="string">'s'</span>);
            bool = validateAMARES(inp);
        <span class="keyword">end</span>

        fitted = loadJmruiAmares(inp);

        <span class="keyword">if</span> nargin &lt; 2

            promptn = <span class="string">'Enter the AMARES .txt outputs corresponding to negative data to process: '</span>;
            inpneg = input(promptn,<span class="string">'s'</span>);
            bool = validateAMARES(inp);

            <span class="keyword">while</span> bool == 0
                inpneg = input(promptn1,<span class="string">'s'</span>);
                bool = validateAMARES(inpneg);
            <span class="keyword">end</span>

            fittedneg = loadJmruiAmares(inpneg);

        <span class="keyword">end</span>

    <span class="keyword">elseif</span> nargin &lt; 2

        fitted = loadJmruiAmares(inp);
        promptn = <span class="string">'Enter the AMARES .txt outputs corresponding to negative data to process: '</span>;
        inpneg = input(promptn,<span class="string">'s'</span>);
        bool = validateAMARES(inpneg);

        <span class="keyword">while</span> bool == 0
            inpneg = input(promptn1,<span class="string">'s'</span>);
            bool = validateAMARES(inpneg);
        <span class="keyword">end</span>

        fittedneg = loadJmruiAmares(inpneg);

    <span class="keyword">else</span>

        bool = validateAMARES(inp);

        <span class="keyword">while</span> bool == 0
            inp = input(prompt1,<span class="string">'s'</span>);
            bool = validateAMARES(inp);
        <span class="keyword">end</span>

        fitted = loadJmruiAmares(inp);

        bool = validateAMARES(inpneg);

        <span class="keyword">while</span> bool == 0
            inp = input(promptn1,<span class="string">'s'</span>);
            bool = validateAMARES(inp);
        <span class="keyword">end</span>

        fittedneg = loadJmruiAmares(inpneg);

    <span class="keyword">end</span>
</pre><pre class="codeinput"><span class="keyword">end</span>
</pre><pre class="codeoutput">
fitted = 

  struct with fields:

       headers: {12&times;2 cell}
     peakNames: {'PYRUVATE'}
    dataByPeak: [1&times;1 struct]
    dataByLine: [1&times;10 struct]
    dataGlobal: [1&times;1 struct]


fittedneg = 

  struct with fields:

       headers: {12&times;2 cell}
     peakNames: {'PYRUVATE'}
    dataByPeak: [1&times;1 struct]
    dataByLine: [1&times;10 struct]
    dataGlobal: [1&times;1 struct]

</pre><h2 id="9">Notes</h2><p>The inputs used in the example are:</p><p><i>inp</i>: '21_11_19_pyrSweep_pos.txt'</p><p><i>inpneg</i>: '21_11_19_pyrSweep_neg.txt'</p><p>The example was run by putting:</p><p>[fitted,fittedneg] = processAMARESSweep('21_11_19_pyrSweep_pos.txt','21_11_19_pyrSweep_neg.txt')</p><p>into the command window</p><p class="footer"><br><a href="https://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2019b</a><br></p></div><!--
##### SOURCE BEGIN #####
%% Appending Negative Data from AMARES to its Corresponding Positive Data
%%
% In experiments such as microwave sweeps, the signal can be either
% negative or positive representing negative and positive hyperpolarisation
% respectively. The AMARES algorithm does not quantify data as negative
% when run. This function will process the output from two AMARES outputs,
% one corresponding to the positive data and one corresponding to the
% negative data into two separate structure arrays that can be manipulated
% by other functions.
%% Inputs
% _inp_: is the AMARES .txt output file corresponding to negative
% polarisation (positive amplitudes) 
%%
% _inpneg_: is the AMARES .txt output file corresponding to positive
% polarisation (higher microwave frequencies and negative amplitudes in the
% raw data)
%% Outputs
% _fitted_: is a structure array of the _inp_ AMARES output
% _fittedneg_: is a structure array of the _inpneg_ AMARES output
%% Child Functions
% _loadJmruiAmares_: parse the .txt output from AMARES in JMRUI into a
% structure array
% _validateAMARES_: verifies that a file can be passed into
% _loadJmruiAmares without throwing an exception

function [fitted,fittedneg] = processAMARESSweep(inp,inpneg) 

    %% Calling the User if There are Insufficient Inputs
    % The function requires two .txt files from the output of the AMARES
    % algorithm. If two files have not been entered into the inputs, the
    % function will call the user to enter more inputs. See processAMARES
    % and loadJmruiAmares for functions that do not require multiple
    % outputs from AMARES.
    
    prompt = 'Enter the AMARES .txt output corresponding to positive data to process: ';
    prompt1 = 'Please enter a valid AMARES .txt output corresponding to the positive data to process: ';
    
    promptn = 'Enter the AMARES .txt outputs corresponding to negative data to process: ';
    promptn1 = 'Please enter a valid AMARES .txt output corresponding to the negative data to process: ';

    if nargin == 0
        
        inp = input(prompt,'s');
        bool = validateAMARES(inp);
        
        while bool == 0
            inp = input(prompt1,'s');
            bool = validateAMARES(inp);
        end
        
        fitted = loadJmruiAmares(inp); 
    
        inpneg = input(promptn,'s');
        bool = validateAMARES(inpneg);
        
        while bool == 0
            inpneg = input(promptn1,'s');
            bool = validateAMARES(inpneg);
        end
        
        fittedneg = loadJmruiAmares(inpneg);
        
    elseif isempty(inp) == 1
        
        inp = input(prompt,'s');
        bool = validateAMARES(inp);
        
        while bool == 0
            inp = input(prompt1,'s');
            bool = validateAMARES(inp);
        end
        
        fitted = loadJmruiAmares(inp);
        
        if nargin < 2
            
            promptn = 'Enter the AMARES .txt outputs corresponding to negative data to process: '; 
            inpneg = input(promptn,'s');
            bool = validateAMARES(inp);
        
            while bool == 0
                inpneg = input(promptn1,'s');
                bool = validateAMARES(inpneg);
            end
        
            fittedneg = loadJmruiAmares(inpneg);
            
        end
        
    elseif nargin < 2
        
        fitted = loadJmruiAmares(inp);
        promptn = 'Enter the AMARES .txt outputs corresponding to negative data to process: '; 
        inpneg = input(promptn,'s');
        bool = validateAMARES(inpneg);
        
        while bool == 0
            inpneg = input(promptn1,'s');
            bool = validateAMARES(inpneg);
        end
        
        fittedneg = loadJmruiAmares(inpneg);
        
    else
        
        bool = validateAMARES(inp);
        
        while bool == 0
            inp = input(prompt1,'s');
            bool = validateAMARES(inp);
        end
        
        fitted = loadJmruiAmares(inp);
        
        bool = validateAMARES(inpneg);
        
        while bool == 0
            inp = input(promptn1,'s');
            bool = validateAMARES(inp);
        end
        
        fittedneg = loadJmruiAmares(inpneg);
        
    end
   
end

%% Notes
% The inputs used in the example are:
%%
% _inp_: '21_11_19_pyrSweep_pos.txt' 
%%
% _inpneg_: '21_11_19_pyrSweep_neg.txt' 
%% 
% The example was run by putting:
%%
% [fitted,fittedneg] = processAMARESSweep('21_11_19_pyrSweep_pos.txt','21_11_19_pyrSweep_neg.txt')
%%
% into the command window
##### SOURCE END #####
--></body></html>