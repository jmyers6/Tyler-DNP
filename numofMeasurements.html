
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>Determining the Number of Points Measured per Signal and the Number of Signals in an mRUI .txt Output File from JMRUI</title><meta name="generator" content="MATLAB 9.7"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2019-12-12"><meta name="DC.source" content="numofMeasurements.m"><style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; } 

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style></head><body><div class="content"><h1>Determining the Number of Points Measured per Signal and the Number of Signals in an mRUI .txt Output File from JMRUI</h1><!--introduction--><!--/introduction--><h2>Contents</h2><div><ul><li><a href="#1">Input</a></li><li><a href="#2">Outputs</a></li><li><a href="#4">Child Functions</a></li><li><a href="#6">Reading the Measurements per Signal and Number of Signals from the Input</a></li><li><a href="#8">Notes</a></li></ul></div><h2 id="1">Input</h2><p><i>FID</i>: is a .txt output mRUI file from JMRUI</p><h2 id="2">Outputs</h2><p><i>pointsPerSig</i>: is the number of measurements taken per signal</p><p><i>numSigs</i>: is the number of signals in the input file</p><h2 id="4">Child Functions</h2><p><i>isdatfile</i>: checks if an input is a readible file <i>isint</i>: checks if an input is an integral number</p><pre class="codeinput"><span class="keyword">function</span> [pointsPerSig,numSigs] = numofMeasurements(FID)
</pre><pre class="codeinput">    <span class="keyword">if</span> nargin &lt; 1
        disp(<span class="string">'Error: No input'</span>)
        FID = input(<span class="string">'Enter a .txt mRUI file from JMRUI to calcualte the points per signal and number of signals: '</span>,<span class="string">'s'</span>);
    <span class="keyword">end</span>
</pre><h2 id="6">Reading the Measurements per Signal and Number of Signals from the Input</h2><p>The number of measurements is written on the 5th line from the 18th character of it, while the number of signals is writen on the 6th line from the 17th character of it.</p><pre class="codeinput">    FIDbool = isdatfile(FID);

    <span class="keyword">while</span> FIDbool == 0
        disp(<span class="string">'Error: Invalid input'</span>)
        FID = input(<span class="string">'Enter a .txt mRUI file from JMRUI to calcualte the points per signal and number of signals: '</span>,<span class="string">'s'</span>);
        FIDbool = isdatfile(FID);
    <span class="keyword">end</span>

    fin = fopen(FID);

    <span class="keyword">for</span> el = 1:5
        line = fgetl(fin);
    <span class="keyword">end</span>

    pointsPerSig = str2double(line(18:end));
    intp = isint(pointsPerSig);

    <span class="keyword">while</span> intp == 0

        disp(<span class="string">'Error: Invalid input'</span>)
        FID = input(<span class="string">'Enter a .txt mRUI file from JMRUI to calcualte the points per signal and number of signals: '</span>,<span class="string">'s'</span>);
        cont = isdatfile(FID);

        <span class="keyword">if</span> cont == 1

            fin = fopen(FID);

            <span class="keyword">for</span> el = 1:5
                line = fgetl(fin);
            <span class="keyword">end</span>

            pointsPerSig = str2double(line(18:end));
            intp = isint(pointsPerSig);

        <span class="keyword">end</span>

    <span class="keyword">end</span>

    line = fgetl(fin);

    numSigs = str2double(line(17:end));

    fclose(fin);
</pre><pre class="codeinput"><span class="keyword">end</span>
</pre><pre class="codeoutput">
pointsPerSig =

        4096


numSigs =

    60

</pre><h2 id="8">Notes</h2><p>The input used in the example was:</p><p><i>FID</i>: 'Decay_DissolutionFID_1Pyr_09_12_19.txt'</p><p>The example was run by putting:</p><p>[pointsPerSig,numSigs] = numofMeasurements('Decay_DissolutionFID_1Pyr_09_12_19.txt')</p><p>into the command window</p><p class="footer"><br><a href="https://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2019b</a><br></p></div><!--
##### SOURCE BEGIN #####
%% Determining the Number of Points Measured per Signal and the Number of Signals in an mRUI .txt Output File from JMRUI
%%
%% Input
% _FID_: is a .txt output mRUI file from JMRUI
%% Outputs
% _pointsPerSig_: is the number of measurements taken per signal
%%
% _numSigs_: is the number of signals in the input file
%% Child Functions
% _isdatfile_: checks if an input is a readible file
% _isint_: checks if an input is an integral number

function [pointsPerSig,numSigs] = numofMeasurements(FID)
    
    if nargin < 1
        disp('Error: No input')
        FID = input('Enter a .txt mRUI file from JMRUI to calcualte the points per signal and number of signals: ','s');
    end

    %% Reading the Measurements per Signal and Number of Signals from the Input
    % The number of measurements is written on the 5th line from the 18th
    % character of it, while the number of signals is writen on the 6th
    % line from the 17th character of it.
    
    FIDbool = isdatfile(FID);
    
    while FIDbool == 0
        disp('Error: Invalid input')
        FID = input('Enter a .txt mRUI file from JMRUI to calcualte the points per signal and number of signals: ','s');
        FIDbool = isdatfile(FID);
    end
        
    fin = fopen(FID);
    
    for el = 1:5
        line = fgetl(fin);
    end
    
    pointsPerSig = str2double(line(18:end));
    intp = isint(pointsPerSig);
    
    while intp == 0
        
        disp('Error: Invalid input')
        FID = input('Enter a .txt mRUI file from JMRUI to calcualte the points per signal and number of signals: ','s');
        cont = isdatfile(FID);
        
        if cont == 1
            
            fin = fopen(FID);
    
            for el = 1:5
                line = fgetl(fin);
            end
    
            pointsPerSig = str2double(line(18:end));
            intp = isint(pointsPerSig);
            
        end
        
    end
    
    line = fgetl(fin);
    
    numSigs = str2double(line(17:end));
    
    fclose(fin);
    
end

%% Notes
% The input used in the example was:
%%
% _FID_: 'Decay_DissolutionFID_1Pyr_09_12_19.txt'
%%
% The example was run by putting:
%%
% [pointsPerSig,numSigs] =
% numofMeasurements('Decay_DissolutionFID_1Pyr_09_12_19.txt') 
%%
% into the command window
##### SOURCE END #####
--></body></html>